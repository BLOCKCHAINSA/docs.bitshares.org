



<!doctype html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width">
    <title>Full Node</title>

    <!-- CSS -->
    <link  href='../_static/main.css' rel='stylesheet'>
    <link  href='../_static/style.css' rel='stylesheet'>
    <link  href='../_static/doxygen.css' rel='stylesheet'>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

    <!-- Sphinx search -->
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <!-- Transifex -->
    <script type="text/javascript">
      window.liveSettings = {
        api_key: "bbf87af0641e4bbf89c98088d48e0449",
      };
    </script>
    <script type="text/javascript" src="http://cdn.transifex.com/live.js"></script>

    <!-- title card -->
    <link  href='../_static/title-card.css' rel='stylesheet'>
    <script src='../_static/script.js'></script>
    
    <!-- Sphinx search -->
    <link rel="search" type="application/opensearchdescription+xml"
          title="Search within Graphene/BitShares 2.0 Technical Documentation  documentation"
          href="../_static/opensearch.xml"/>

    <!-- Meta -->
    <meta content="Graphene Documentation" property="og:site_name">
    <meta content="Graphene Documentation" property="og:title">
    <meta content="website" property="og:type">
    <meta content="Graphene Documentation" name="description">
    <meta content="Graphene Documentation" property="og:description">
    
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-68381245-1', 'auto');
  ga('send', 'pageview');

</script>

 </head>
 <body class='no-literate'>


 <div class='title-area title-card' style='background-image: url(https://bitshares.org/images/bg.jpg)'>
   <div class='in'>
     <div class='headline'>
       <h1>Full Node</h1>
 
     </div>
   </div>
 </div>

 <div class='header'>
   <div class='left navlinks'>
    
        <div class="prev">
         <div class="title">previous</div>
         <span><a href="index.html">Applications</a></span>
        </div>
        <div class="top">
         <div class="title">top</div>
         <span><a class="uplink" href="../index.html">Contents</a></span>
        </div>
        <div class="next">
         <div class="title">next</div>
         <span><a href="DelayedNode.html">Delayed Full Node</a></span>
        </div>

   </div>
   <!--
    <div class='right'>
<div id="searchbox" style="display: none" role="search">
 <form class="search" action="../search.html" method="get">
   <input type="text" name="q" />
   <input type="submit" value="Go" />
   <input type="hidden" name="check_keywords" value="yes" />
   <input type="hidden" name="area" value="default" />
 </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
   </div>
   -->
 </div>

 <div class='content-root'>
  <!-- menu bar -->
  <div class='menubar'>
   <div class='section'>
    <a href="../"><img src="../_static/grphn-logo.svg" width="48" /></a>
       <!--<a class='big button' href='#' target='_blank'>Download</a>-->
   </div>
   <div class='menu section'>
    <div id="toc">
      <h3>Table Of Contents</h3>
      <ul>
<li class="toctree-l1"><a class="reference internal" href="../migration/index.html">Migrating from BitShares 1.0 to BitShares 2.0</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../installation/index.html">Installation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../user/index.html">User Guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../integration/index.html">Integrating the BitShares Network</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Applications</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="">Full Node</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#full-nodes">Full Nodes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#configuration">Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="#enabling-remote-procedure-calls-rpc">Enabling Remote Procedure Calls (RPC)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#restarting-the-witness-node">Restarting the witness node</a></li>
<li class="toctree-l3"><a class="reference internal" href="#enabling-block-production">Enabling Block Production</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="DelayedNode.html">Delayed Full Node</a></li>
<li class="toctree-l2"><a class="reference internal" href="CliWallet.html">CLI Wallet</a></li>
<li class="toctree-l2"><a class="reference internal" href="CliFullWallet.html">Full Node Wallet</a></li>
<li class="toctree-l2"><a class="reference internal" href="WebWallet.html">Web Wallet</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../develop/index.html">Developers</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../blockchain/index.html">Blockchain Specifications</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api/index.html">Graphene API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../namespaces/index.html">Namespaces</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../testnet/index.html">Testnets</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../meta/index.html">Meta</a></li>
</ul>

    </div>
   </div>
   <div class='bottom section'>
   <!--
     <a href='https://github.com/cryptonomex/graphene'>View on GitHub</a><br>
     <a href='https://github.com/cryptonomex/graphene/blob/master/README.md' target='_blank'>See .md source</a>
   -->
   </div>
  </div>
  <div class='content'>
   
  <div class="section" id="full-node">
<h1>Full Node<a class="headerlink" href="#full-node" title="Permalink to this headline">¶</a></h1>
<p>We here distringuish between full nodes (a.k.a. <em>non-block producing</em> witness
nodes) and <em>block producing</em> witness nodes. Both are implemented by the same
executable but the latter requires some additional parameters to be defined and
the corresponding witness voted active by the shareholders.</p>
<p>Both represent nodes in the network that verify all transactions and blocks
against the current state of the overall network. Hence, we recommend all
service providers to run an maintain their own <strong>full nodes</strong> for reliability
and security reasons.</p>
<div class="section" id="full-nodes">
<h2>Full Nodes<a class="headerlink" href="#full-nodes" title="Permalink to this headline">¶</a></h2>
<p>The full node is launched according to:</p>
<div class="highlight-sh"><div class="highlight"><pre>./programs/witness_node/witness_node
</pre></div>
</div>
<p>It takes an optional <cite>&#8211;data-dir</cite> parameter to define a working and data
directory to store the configuration, blockchain and local databases (defaults
to <code class="docutils literal"><span class="pre">witness_node_data_dir</span></code>. Those will be automatically created with default
settings if they don&#8217;t exist locally set.</p>
</div>
<div class="section" id="configuration">
<h2>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h2>
<p>The configuration file <code class="docutils literal"><span class="pre">config.ini</span></code> in your data directory is commented and
contains the following essential settings::</p>
<div class="highlight-python"><div class="highlight"><pre>* ``p2p-endpoint``:
</pre></div>
</div>
<blockquote>
<div>Endpoint for P2P node to listen on</div></blockquote>
<ul>
<li><dl class="first docutils">
<dt><code class="docutils literal"><span class="pre">seed-node</span></code>:</dt>
<dd><p class="first last">P2P nodes to connect to on startup (may specify multiple times)</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal"><span class="pre">checkpoint</span></code>:</dt>
<dd><p class="first last">Pairs of [BLOCK_NUM,BLOCK_ID] that should be enforced as checkpoints.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal"><span class="pre">rpc-endpoint</span></code>:</dt>
<dd><p class="first last">Endpoint for websocket RPC to listen on (e.g. <code class="docutils literal"><span class="pre">0.0.0.0:8090</span></code>)</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal"><span class="pre">rpc-tls-endpoint</span></code>:</dt>
<dd><p class="first last">Endpoint for TLS websocket RPC to listen on</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal"><span class="pre">server-pem</span></code>:</dt>
<dd><p class="first last">The TLS certificate file for this server</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal"><span class="pre">server-pem-password</span></code>:</dt>
<dd><p class="first last">Password for this certificate</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal"><span class="pre">genesis-json</span></code>:</dt>
<dd><p class="first last">File to read Genesis State from</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal"><span class="pre">api-access</span></code>:</dt>
<dd><p class="first last">JSON file specifying API permissions</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal"><span class="pre">enable-stale-production</span></code>:</dt>
<dd><p class="first last">Enable block production, even if the chain is stale. (unless for private testnets should be <code class="docutils literal"><span class="pre">false</span></code>)</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal"><span class="pre">required-participation</span></code>:</dt>
<dd><p class="first last">Percent of witnesses (0-99) that must be participating in order to produce blocks</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal"><span class="pre">allow-consecutive</span></code>:</dt>
<dd><p class="first last">Allow block production, even if the last block was produced by the same witness.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal"><span class="pre">witness-id</span></code>:</dt>
<dd><p class="first last">ID of witness controlled by this node (e.g. &#8220;1.6.5&#8221;, quotes are required, may specify multiple times)</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal"><span class="pre">private-key</span></code>:</dt>
<dd><p class="first last">Tuple of <code class="docutils literal"><span class="pre">[PublicKey,</span> <span class="pre">WIF</span> <span class="pre">private</span> <span class="pre">key]</span></code> (may specify multiple times)</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal"><span class="pre">track-account</span></code>:</dt>
<dd><p class="first last">Account ID to track history for (may specify multiple times)</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal"><span class="pre">bucket-size</span></code>:</dt>
<dd><p class="first last">Track market history by grouping orders into buckets of equal size measured
in seconds specified as a JSON array of numbers</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal"><span class="pre">history-per-size</span></code>:</dt>
<dd><p class="first last">How far back in time to track history for each bucket size, measured in the number of buckets (default: 1000)</p>
</dd>
</dl>
</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Folders and files are considered to be relative to the working
directory (i.e. the directory from which the executables are launched from)</p>
</div>
</div>
<div class="section" id="enabling-remote-procedure-calls-rpc">
<h2>Enabling Remote Procedure Calls (RPC)<a class="headerlink" href="#enabling-remote-procedure-calls-rpc" title="Permalink to this headline">¶</a></h2>
<p>In order to allow RPC calls for blockchain operations you need to modify the
following entry in the configuration file::</p>
<div class="highlight-python"><div class="highlight"><pre>rpc-endpoint = 0.0.0.0:8090
</pre></div>
</div>
<p>This will open the port 8090 for global queries only. Since the witness node
only maintains the blockchain and (unless you are an actively block producing
witness) no private keys are involved, it is safe to expose your witness to the
internet.</p>
</div>
<div class="section" id="restarting-the-witness-node">
<h2>Restarting the witness node<a class="headerlink" href="#restarting-the-witness-node" title="Permalink to this headline">¶</a></h2>
<p>When restarting the witness node, it may be required to append the
<cite>&#8211;replay-blockchain</cite> parameter to regenerate the local (in-memory) blockchain
state.</p>
</div>
<div class="section" id="enabling-block-production">
<h2>Enabling Block Production<a class="headerlink" href="#enabling-block-production" title="Permalink to this headline">¶</a></h2>
<p>For block production, the required parameters to be defined are</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">witness-id</span></code> and</li>
<li><code class="docutils literal"><span class="pre">private-key</span></code> as a pair of public key and wif private key.</li>
</ul>
<p>The witness-id and public key can be obtain via::</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">get_witness</span> <span class="o">&lt;</span><span class="n">accountname</span><span class="o">&gt;</span>
<span class="go">{</span>
<span class="go">  [...]</span>
<span class="go">  &quot;id&quot;: &quot;1.6.10&quot;,</span>
<span class="go">  &quot;signing_key&quot;: &quot;GPH7vQ7GmRSJfDHxKdBmWMeDMFENpmHWKn99J457BNApiX1T5TNM8&quot;,</span>
<span class="go">  [...]</span>
<span class="go">}</span>
</pre></div>
</div>
<p>Assuming we want to maintain the witness with id <code class="docutils literal"><span class="pre">1.6.10</span></code>, the corresponding
setting would be::</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">witness</span><span class="o">-</span><span class="nb">id</span> <span class="o">=</span> <span class="s">&quot;1.6.10&quot;</span>
</pre></div>
</div>
<p>The required private keys can be exported from most wallets (e.g.
<code class="docutils literal"><span class="pre">dump_private_keys</span></code>) for configuration according to::</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">private</span><span class="o">-</span><span class="n">key</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;BTS7vQ7GmRSJfDHxKdBmWMeDMFENpmHWKn99J457BNApiX1T5TNM8&quot;</span><span class="p">,</span><span class="s">&quot;5JGi7DM7J8fSTizZ4D9roNgd8dUc5pirUe9taxYCUUsnvQ4zCaQ&quot;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>


  </div>
 </div>

 <script>var HN=[];HN.factory=function(e){return function(){HN.push([e].concat(Array.prototype.slice.call(arguments,0)))};},HN.on=HN.factory("on"),HN.once=HN.factory("once"),HN.off=HN.factory("off"),HN.emit=HN.factory("emit"),HN.load=function(){var e="hn-button.js";if(document.getElementById(e))return;var t=document.createElement("script");t.id=e,t.src="//hn-button.herokuapp.com/hn-button.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n)},HN.load();</script>
 </body>
</html>