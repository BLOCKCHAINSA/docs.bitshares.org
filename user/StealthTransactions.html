



<!doctype html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width">
    <title>Stealth Transfers</title>

    <!-- CSS -->
    <link href='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css' rel='stylesheet'>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css" rel="stylesheet">
    <link href='../_static/main.css' rel='stylesheet'>
    <link href='../_static/style.css' rel='stylesheet'>
    <link href='../_static/doxygen.css' rel='stylesheet'>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

    <!-- Sphinx search -->
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <!-- Transifex -->
    <script type="text/javascript">
      window.liveSettings = {
        api_key: "bbf87af0641e4bbf89c98088d48e0449",
      };
    </script>
    <script type="text/javascript" src="http://cdn.transifex.com/live.js"></script>

    <!-- title card -->
    <link  href='../_static/title-card.css' rel='stylesheet'>
    <script src='../_static/script.js'></script>
    
    <!-- Sphinx search -->
    <link rel="search" type="application/opensearchdescription+xml"
          title="Search within Graphene/BitShares 2.0 Technical Documentation  documentation"
          href="../_static/opensearch.xml"/>

    <!-- Meta -->
    <meta content="Graphene Documentation" property="og:site_name">
    <meta content="Graphene Documentation" property="og:title">
    <meta content="website" property="og:type">
    <meta content="Graphene Documentation" name="description">
    <meta content="Graphene Documentation" property="og:description">
    
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-68381245-1', 'auto');
  ga('send', 'pageview');

</script>

 </head>
 <body class='no-literate'>


 <div class='title-area title-card' style='background-image: url(https://bitshares.org/images/bg.jpg)'>
   <div class='in'>
     <div class='headline'>
       <h1>Stealth Transfers</h1>
 
     </div>
   </div>
 </div>

 <div class='header'>
   <div class='left navlinks'>
    
        <div class="prev">
         <div class="title">previous</div>
         <span><a href="Transactions.html">Transactions</a></span>
        </div>
        <div class="top">
         <div class="title">top</div>
         <span><a class="uplink" href="../index.html">Contents</a></span>
        </div>
        <div class="next">
         <div class="title">next</div>
         <span><a href="Committee.html">Committee</a></span>
        </div>

   </div>
   <!--
    <div class='right'>
<div id="searchbox" style="display: none" role="search">
 <form class="search" action="../search.html" method="get">
   <input type="text" name="q" />
   <input type="submit" value="Go" />
   <input type="hidden" name="check_keywords" value="yes" />
   <input type="hidden" name="area" value="default" />
 </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
   </div>
   -->
 </div>

 <div class='content-root'>
  <!-- menu bar -->
  <div class='menubar'>
   <div class='section'>
    <a href="../"><img src="../_static/grphn-logo.svg" width="48" /></a>
       <!--<a class='big button' href='#' target='_blank'>Download</a>-->
   </div>
   <div class='menu section'>
    <div id="toc">
      <h3>Table Of Contents</h3>
      <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../migration/index.html">Migrating from BitShares 1.0 to BitShares 2.0</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">User Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="Account.html">Accounts</a></li>
<li class="toctree-l2"><a class="reference internal" href="Assets.html">Assets/Tokens</a></li>
<li class="toctree-l2"><a class="reference internal" href="Dex.html">Decentralized Exchange</a></li>
<li class="toctree-l2"><a class="reference internal" href="Shareholder.html">Shareholder</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="Transactions.html">Transactions</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="">Stealth Transfers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#creating-a-blind-account">Creating a Blind Account</a></li>
<li class="toctree-l4"><a class="reference internal" href="#adding-a-contact">Adding a Contact</a></li>
<li class="toctree-l4"><a class="reference internal" href="#transferring-to-a-stealth-balance">Transferring to a Stealth Balance</a></li>
<li class="toctree-l4"><a class="reference internal" href="#viewing-blind-balances">Viewing Blind Balances</a></li>
<li class="toctree-l4"><a class="reference internal" href="#stealth-transfer-to-bob">Stealth Transfer to Bob</a></li>
<li class="toctree-l4"><a class="reference internal" href="#receiving-a-blind-transfer">Receiving a Blind Transfer</a></li>
<li class="toctree-l4"><a class="reference internal" href="#transferring-back-to-public">Transferring back to Public</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Committee.html">Committee</a></li>
<li class="toctree-l2"><a class="reference internal" href="Witness.html">Witnesses</a></li>
<li class="toctree-l2"><a class="reference internal" href="Worker.html">Workers / Budget Items</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../installation/index.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/index.html">Graphene API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../apps/index.html">Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../integration/index.html">Integrating the BitShares Network</a></li>
<li class="toctree-l1"><a class="reference internal" href="../blockchain/index.html">Blockchain Specifications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../namespaces/index.html">Namespaces</a></li>
<li class="toctree-l1"><a class="reference internal" href="../testnet/index.html">Testnets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../develop/index.html">Developers</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../meta/index.html">Meta</a></li>
</ul>

    </div>
   </div>
   <div class='bottom section'>
   <!--
     <a href='https://github.com/cryptonomex/graphene'>View on GitHub</a><br>
     <a href='https://github.com/cryptonomex/graphene/blob/master/README.md' target='_blank'>See .md source</a>
   -->
   </div>
  </div>
  <div class='content'>
   
  <div class="section" id="stealth-transfers">
<h1>Stealth Transfers<a class="headerlink" href="#stealth-transfers" title="Permalink to this headline">¶</a></h1>
<p>This tutorial shows how to use the CLI wallet to perform stealth transfers in
BitShares. A stealth transfer is one that hides both the amount being sent and
the parties involved in the trade. Stealth transfers are also referred to as
blinded transfers. When privacy is important no account is ever used twice and
it is impossible for any third party to identify how money is moving through
blockchain analysis alone.</p>
<div class="section" id="creating-a-blind-account">
<h2>Creating a Blind Account<a class="headerlink" href="#creating-a-blind-account" title="Permalink to this headline">¶</a></h2>
<p>Blind Accounts are not registered on the blockchain like the named accounts on
BitShares.  Instead a blind account is nothing more than a labeled public key.
The label assigned to the key is only known to your wallet.  The first step is
to create an blind account by giving the wallet a name and a &#8220;brainkey&#8221;.  A
&#8220;brainkey&#8221; is effectively the private key used by your account.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">create_blind_account</span> <span class="n">alice</span> <span class="s">&quot;alice-brain-key&quot;</span>
<span class="go">    &quot;BTS7vbxtK1WaZqXsiCHPcjVFBewVj8HFRd5Z5XZDpN6Pvb2dZcMqK&quot;</span>
</pre></div>
</div>
<p>The result of this call is to print out the Public Key associated with blind account <em>alice</em>.</p>
<p>For the purpose of this test we will create two blind accounts in two different
wallets (alice and bob).:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">create_blind_account</span> <span class="n">bob</span> <span class="s">&quot;bob-brain-key&quot;</span>
<span class="go">    &quot;BTS8HosMbp7tL614bFgqtXXownHykqASxwmnH9NrhAnvtTuVWRf1X&quot;</span>
</pre></div>
</div>
<p>Alice and Bob now each have their own account in their own wallet that isn&#8217;t
known to anyone else in the world.  They can view their blind accounts with the
following command::</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">get_my_blind_accounts</span>
<span class="go">[[</span>
<span class="go">&quot;alice&quot;,</span>
<span class="go">&quot;BTS7vbxtK1WaZqXsiCHPcjVFBewVj8HFRd5Z5XZDpN6Pvb2dZcMqK&quot;</span>
<span class="go">]]</span>
</pre></div>
</div>
</div>
<div class="section" id="adding-a-contact">
<h2>Adding a Contact<a class="headerlink" href="#adding-a-contact" title="Permalink to this headline">¶</a></h2>
<p>Suppose Alice wishes to make a payment to Bob, she must first ask Bob for his
account public key, BTS8HosMbp7tL614bFgqtXXownHykqASxwmnH9NrhAnvtTuVWRf1X.
Then she can assign a label to it in her wallet.  In this case she will record
bob&#8217;s key as &#8220;bobby&#8221;.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">set_key_label</span> <span class="n">BTS8HosMbp7tL614bFgqtXXownHykqASxwmnH9NrhAnvtTuVWRf1X</span> <span class="n">bobby</span>
</pre></div>
</div>
</div>
<div class="section" id="transferring-to-a-stealth-balance">
<h2>Transferring to a Stealth Balance<a class="headerlink" href="#transferring-to-a-stealth-balance" title="Permalink to this headline">¶</a></h2>
<p>All balances must come from somewhere and initially all balances are held by
some public account.  For the purpose of this example we will assume alice has
an account with the name &#8216;alicepub&#8217; has a public balance that it would like to
obscure.   It will do this by transferring some funds to one or more blind
accounts.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">transfer_to_blind</span> <span class="n">alicepub</span> <span class="n">BTS</span> <span class="p">[[</span><span class="n">alice</span><span class="p">,</span><span class="mi">1000</span><span class="p">],[</span><span class="n">alice</span><span class="p">,</span><span class="mi">2000</span><span class="p">]]</span> <span class="n">true</span>
<span class="go">alicepub sent 3000 BTS to 2 blinded balances fee: 15 BTS</span>
<span class="go">1000 BTS to  alice</span>
<span class="go">receipt: 2Dif6AK9AqYGDLDLYcpcwBmzA36dZRmuXXJR8tTQsXg32nBGs6AetDT2E4u4GSVbMKEiTi54sqYu1Bc23cPvzSAyPGEJTLkVpihaot4e1FUDnNPz41uFfu2G6rug1hcRf2Qp5kkRm4ucsAi4Fzb2M3MSfw4r56ucztRisk9JJjLdqFjUPuiAiTdM99JdfKZy8WTkKF2npd</span>

<span class="go">2000 BTS to  alice</span>
<span class="go">receipt: 28HrgG1nzkGEDNnL1eZmNvN9JmTVQp7X88nf7rfayjM7sACY8yA7FjV1cW5QXHi1sqv1ywCqfnGiNBqDQWMwpcGB1KdRwDcJPaTMZ5gZpw7Vw4BhdnVeZHY88GV5n8j3uGmZuGBEq18zgHDCFiLJ6WAYvs5PiFvjaNjwQmvBXaC6CqAJWJKXeKCCgmoVJ3CQCw2ErocfVH</span>
</pre></div>
</div>
<p>In this case the only thing the public sees is that account &#8216;alicepub&#8217; sent 3000
BTS to two different places.  The outside world has no idea how much is in each
output, only that they add up to 3000 BTS.</p>
</div>
<div class="section" id="viewing-blind-balances">
<h2>Viewing Blind Balances<a class="headerlink" href="#viewing-blind-balances" title="Permalink to this headline">¶</a></h2>
<p>Alice can verify that she has 3000 BTS in blinded balances by using the
command::</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">get_blind_balances</span> <span class="n">alice</span>
<span class="go">3000 BTS</span>
</pre></div>
</div>
</div>
<div class="section" id="stealth-transfer-to-bob">
<h2>Stealth Transfer to Bob<a class="headerlink" href="#stealth-transfer-to-bob" title="Permalink to this headline">¶</a></h2>
<p>Alice can now transfer to &#8220;Bob&#8221; which she has labeled &#8216;bobby&#8217; in her wallet via
the following command::</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">blind_transfer</span> <span class="n">alice</span> <span class="n">bobby</span> <span class="mi">500</span> <span class="n">BTS</span> <span class="n">true</span>
<span class="go">blind_transfer_operation temp-account fee: 15 BTS</span>
<span class="go">485 BTS to  alice</span>
<span class="go">receipt: iLrPEY61BQsrKSVLLhuJBB6axkjpp2YA1EUq8k8tdQNfbgm1rZn8iUfxd2szyLV1962S39VtPFcuidok7tnT851JFUvP5r7U5MfbtRvmsNBHtSmaWyfbXg7srPsp1roUBpr9Z2QM7W7X5AAonFqoduWcnGp7cViQCDppEqSZHGjY8zFJARd1vm4qoPcMAjw4pjS3vgj6796SfR9ntnN5vZr5b9WvM4Hune7DfbGShed81n1R63BH9h9Ef8BXRy1ERkkJhMmYhXKC</span>

<span class="go">500 BTS to  bobby</span>
<span class="go">receipt: iLrPEY61BQsrKSVLLhuJBB6axkjpp2YA1EUq8k8tdQNfbgmWNQD9tWnAciMpPuLhanv4j8nhvUE1ZjD3WNZPoxdiekTCraMir7xx5rbZsGCogF6YfPbCnZCapMDkC8Zsgs5bZWCB2oRvB1wCjYmsQaji6SQcax5Sii4MY93Q1HGPvehcS7jBvLDz5e1GQmAzoWhnPZqoCuDSvL521CSCCxRvLXoHK1Rih5kX72tJYdAXCECUL3xZ2cd2CA8eegfTiC7f7XkTd75f</span>
</pre></div>
</div>
<p>The output shows that 500 BTS was sent to bobby and 485 BTS sent back to alice
as change after paying a 15 BTS fee.  If we check the balance of alice we will
see:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">get_blind_balances</span> <span class="n">alice</span>
<span class="go">2485 BTS</span>
</pre></div>
</div>
<p>The outside world only knows that alice sent some amount less than 3000 BTS to
two new outputs.</p>
</div>
<div class="section" id="receiving-a-blind-transfer">
<h2>Receiving a Blind Transfer<a class="headerlink" href="#receiving-a-blind-transfer" title="Permalink to this headline">¶</a></h2>
<p>At this point Bob has not actually received any funds because his wallet has no
idea where to look.  He needs to load the receipt from Alice into his account.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">receive_blind_transfer</span> <span class="n">iLrPEY61BQsrKSVLLhuJBB6axkjpp2YA1EUq8k8tdQNfbgmWNQD9tWnAciMpPuLhanv4j8nhvUE1ZjD3WNZPoxdiekTCraMir7xx5rbZsGCogF6YfPbCnZCapMDkC8Zsgs5bZWCB2oRvB1wCjYmsQaji6SQcax5Sii4MY93Q1HGPvehcS7jBvLDz5e1GQmAzoWhnPZqoCuDSvL521CSCCxRvLXoHK1Rih5kX72tJYdAXCECUL3xZ2cd2CA8eegfTiC7f7XkTd75f</span> <span class="s">&quot;alice&quot;</span> <span class="s">&quot;memo&quot;</span>
<span class="go">500 BTS  alice  =&gt;  bob   memo</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">get_blind_balances</span> <span class="n">bob</span>
<span class="go">500 BTS</span>
</pre></div>
</div>
<p>The call to receive a blind transfer takes two optional arguments, &#8220;from&#8221; and
&#8220;memo&#8221; which will be used to label alice&#8217;s public key in bob&#8217;s wallet.  This
helps bob to make sense of his transfer history.:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">blind_history</span> <span class="n">bob</span>

<span class="go">WHEN           AMOUNT  FROM  =&gt;  TO  MEMO</span>
<span class="go">====================================================================================</span>
<span class="go">19 seconds ago  500 BTS  alice  =&gt;  bob  memo</span>
</pre></div>
</div>
</div>
<div class="section" id="transferring-back-to-public">
<h2>Transferring back to Public<a class="headerlink" href="#transferring-back-to-public" title="Permalink to this headline">¶</a></h2>
<p>Eventually every blind balance needs to convert back to a public balance which
can be achieved with the following command::</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">transfer_from_blind</span> <span class="n">alice</span> <span class="n">alicepub</span> <span class="mi">1000</span> <span class="n">BTS</span> <span class="n">true</span>
<span class="go">{ ... }</span>
</pre></div>
</div>
<p>In this case alice returned some of her remaining blind balances back to her
public balance.</p>
</div>
</div>


  </div>
 </div>

 <script>var HN=[];HN.factory=function(e){return function(){HN.push([e].concat(Array.prototype.slice.call(arguments,0)))};},HN.on=HN.factory("on"),HN.once=HN.factory("once"),HN.off=HN.factory("off"),HN.emit=HN.factory("emit"),HN.load=function(){var e="hn-button.js";if(document.getElementById(e))return;var t=document.createElement("script");t.id=e,t.src="//hn-button.herokuapp.com/hn-button.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n)},HN.load();</script>
 <script type="text/javascript" src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
 </body>
</html>