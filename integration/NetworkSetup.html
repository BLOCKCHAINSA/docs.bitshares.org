



<!doctype html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width">
    <title>Secure Network and Client Configuration</title>

    <!-- CSS -->
    <link  href='../_static/main.css' rel='stylesheet'>
    <link  href='../_static/style.css' rel='stylesheet'>
    <link  href='../_static/doxygen.css' rel='stylesheet'>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

    <!-- Sphinx search -->
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script src='../_static/script.js'></script>

    <!-- title card -->
    <link  href='../_static/title-card.css' rel='stylesheet'>
    <script src='../_static/title-card.js'></script>
    
    <!-- Sphinx search -->
    <link rel="search" type="application/opensearchdescription+xml"
          title="Search within Graphene/BitShares 2.0 Technical Documentation  documentation"
          href="../_static/opensearch.xml"/>

    <!-- Meta -->
    <meta content="Graphene Documentation" property="og:site_name">
    <meta content="Graphene Documentation" property="og:title">
    <meta content="website" property="og:type">
    <meta content="Graphene Documentation" name="description">
    <meta content="Graphene Documentation" property="og:description">
    
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-68381245-1', 'auto');
  ga('send', 'pageview');

</script>

 </head>
 <body class='no-literate'>

 <div class='title-area title-card' style='background-image: url(https://bitshares.org/images/bg.jpg)'>
   <div class='in'>
     <div class='headline'>
       <h1>Graphene/BitShares 2.0 Technical Documentation</h1>
       <p>Secure Network and Client Configuration</p>
       <p style="margin-top: 3em;"><img src="../_static/learn.svg" width="124" /><p>
     </div>
   </div>
 </div>

 <div class='header'>
   <div class='left'>
    
        «&#160;&#160;<a href="Interfacing.html">Interfacing with the BitShares Ecosystem</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="NodeJS.html">NodeJS Example</a>&#160;&#160;»

   </div>
 </div>

 <div class='content-root'>
  <!-- menu bar -->
  <div class='menubar'>
   <div class='section'>
    <img src="../_static/grphn-logo.svg" width="48" />
       <!--<a class='big button' href='#' target='_blank'>Download</a>-->
   </div>
   <div class='menu section'>
    <div id="toc">
      <h3>Table Of Contents</h3>
      <ul>
<li><a class="reference internal" href="#">Secure Network and Client Configuration</a><ul>
<li><a class="reference internal" href="#overview-of-the-setup">Overview of the Setup</a></li>
<li><a class="reference internal" href="#trusted-full-node">Trusted Full Node</a></li>
<li><a class="reference internal" href="#delayed-full-node">Delayed Full Node</a></li>
</ul>
</li>
</ul>

    </div>
   </div>
   <div class='bottom section'>
   <!--
     <a href='https://github.com/cryptonomex/graphene'>View on GitHub</a><br>
     <a href='https://github.com/cryptonomex/graphene/blob/master/README.md' target='_blank'>See .md source</a>
   -->
   </div>
  </div>
  <div class='content'>
   
  <div class="section" id="secure-network-and-client-configuration">
<h1>Secure Network and Client Configuration<a class="headerlink" href="#secure-network-and-client-configuration" title="Permalink to this headline">¶</a></h1>
<p>Similar to other crypto currencies, it is recommended to wait for several
confirmations of a transcation. Even though the consensus scheme of Graphene is
alot more secure than regular proof-of-work or other proof-of-stake schemes, we
still support exchanges that require more confirmations for deposits.</p>
<p>We provide a so called <em>delayed</em> full node which accepts two additional
parameters for the configuration besides those already available with the
standard daemon.</p>
<ul class="simple">
<li><cite>trusted-node</cite> RPC endpoint of a trusted validating node (required)</li>
<li><cite>delay-block-count</cite> Number of blocks to delay before advancing chain state (required)</li>
</ul>
<p>The trusted-node is a regular full node directly connected to the P2P
network that works as a proxy. The <cite>delay-block-count</cite> gives the number of
blocks that the delayed full node will be behind the real blockchain.</p>
<div class="section" id="overview-of-the-setup">
<h2>Overview of the Setup<a class="headerlink" href="#overview-of-the-setup" title="Permalink to this headline">¶</a></h2>
<p>In the following, we will setup and use the following network::</p>
<div class="highlight-python"><div class="highlight"><pre>P2P network   &lt;-&gt;   Trusted Full Node   &lt;-&gt;   Delayed Full Node   &lt;-&gt;   API
</pre></div>
</div>
<ul class="simple">
<li><strong>P2P network</strong>:
The BitShares client uses a peer-to-peer network to connect and broadcasts
transactions there. A block producing full node will eventually catch your
transcaction and validates it by adding it into a new block.</li>
<li><strong>Trusted Full Node</strong>:
We will use a Full node to connect to the network directly. We call it
<em>trusted</em> since it is supposed to be under our control.</li>
<li><strong>Delayed Full Node</strong>:
The delayed full node node will provide us with a delayed and several times
confirmed and verified blockchain. Even though DPOS is more resistant against
forks than most other blockchain consensus schemes, we delay the blockchain
here to reduces the risk of forks even more. In the end, the delayed full
node is supposed to never enter an invalid fork.</li>
<li><strong>API</strong>:
Since we have a delayed full node that we can fully trust, we will interface
with this node to query the blockchain and receive notifications from it one
balance changes.</li>
</ul>
<p>The delayed full node should be in the same <em>local</em> network as the trusted full
node is in the same network and has internet access. Hence we will work with
the following IPs:</p>
<ul>
<li><dl class="first docutils">
<dt>Trusted Full Node:</dt>
<dd><ul class="first last simple">
<li>extern: <em>internet access</em></li>
<li>intern: <cite>192.168.0.100</cite></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Delayed Full Node:</dt>
<dd><ul class="first last simple">
<li>extern: <em>no</em> internet access required</li>
<li>intern: <cite>192.168.0.101</cite></li>
</ul>
</dd>
</dl>
</li>
</ul>
<p>Let&#8217;s go into more detail how to set these up.</p>
</div>
<div class="section" id="trusted-full-node">
<h2>Trusted Full Node<a class="headerlink" href="#trusted-full-node" title="Permalink to this headline">¶</a></h2>
<p>For the trusted full node, the default settings can be used.  For later, we
will need to open the RPC port and listen to an IP address to connect the
delayed full node to.:</p>
<div class="highlight-python"><div class="highlight"><pre>./programs/witness_node/witness_node --rpc-endpoint=&quot;192.168.0.100:8090&quot;
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">A <em>witness</em> node is identical to a full node if no authorized
block-signing private key is provided.</p>
</div>
</div>
<div class="section" id="delayed-full-node">
<h2>Delayed Full Node<a class="headerlink" href="#delayed-full-node" title="Permalink to this headline">¶</a></h2>
<p>The delayed full node will need the IP address and port of the p2p-endpoint
from the trusted full node and the number of blocks that should be delayed.  We
also need to open the RPC/Websocket port (to the local network!) so that we can
interface using RPC-JSON calls.</p>
<p>For our example and for 10 blocks delaye (i.e. 30 seconds for 3 second block
intervals), we need::</p>
<div class="highlight-python"><div class="highlight"><pre>./programs/delayed_node/delayed_node --trusted-node=&quot;192.168.0.100:8090&quot; \
                                     --delay-block-count=10 \
                                     --rpc-endpoint=&quot;192.168.0.101:8090&quot;
</pre></div>
</div>
<p>We could now connect via RPC:</p>
<ul class="simple">
<li><cite>192.168.0.100:8090</cite> : The trusted full node exposed to the internet</li>
<li><cite>192.168.0.101:8090</cite> : The delayed full node not exposed to the internet</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For security reasons, an exchange should only interface with the delayed
full node.</p>
</div>
<p>For obvious reasons, the trusted full node is should be running before
attempting to start the delayed full node.</p>
</div>
</div>


  </div>
 </div>

 <script>var HN=[];HN.factory=function(e){return function(){HN.push([e].concat(Array.prototype.slice.call(arguments,0)))};},HN.on=HN.factory("on"),HN.once=HN.factory("once"),HN.off=HN.factory("off"),HN.emit=HN.factory("emit"),HN.load=function(){var e="hn-button.js";if(document.getElementById(e))return;var t=document.createElement("script");t.id=e,t.src="//hn-button.herokuapp.com/hn-button.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n)},HN.load();</script>
 </body>
</html>